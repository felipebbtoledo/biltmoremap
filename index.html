<script>"use strict";

(function(window){
    getGoogleSheetByEditURL("https://docs.google.com/spreadsheets/d/e/2PACX-1vTQiD-4OVRtVHt9P7dJhrpXFlqx20O31D19UnqLXBqS_Z0QzoLgopGCcG7TggfWzK8gapj2I4tPAGEg/pub?output=csv", function thenAfter(contents, didError){
        var tableHTML = "<table><tbody>";
        for (var row=0; row < contents.length; row=row+1|0) {
            var curRow = contents[row];
            tableHTML += "<tr>";
            for (var col=0; col < curRow.length; col=col+1|0)
                if(curRow[col].contains("Biltmore Square")){
                    console.log(curRow[col].next());
                }
                tableHTML += "<td>" + curRow[col] + "</td>";
            tableHTML += "</tr>";
        }
        document.body.innerHTML = tableHTML += "</table>";

        if (didError) alert("failed to HTTP get");
    });
    function getGoogleSheetByEditURL(url, then) {
        var xhr = new XMLHttpRequest;
        xhr.open("get", url);
        xhr.responseType = "text";
        xhr.onloadend = function(){
            return then(parseCSV(""||xhr.responseText), !xhr.responseText);
        };
        xhr.timeout = 8192; // assume timeout after 8 seconds
        xhr.send();
    }
    // https://stackoverflow.com/a/14991797/5601591
    function parseCSV(g){for(var c=[],e=!1,a=0,b=0,f=0;f<g.length;f++){var d=g[f],h=g[f+1];c[a]=c[a]||[];c[a][b]=c[a][b]||"";'"'==d&&e&&'"'==h?(c[a][b]+=d,++f):'"'==d?e=!e:","!=d||e?"\r"!=d||"\n"!=h||e?"\n"!=d||e?"\r"!=d||e?c[a][b]+=d:(++a,b=0):(++a,b=0):(++a,b=0,++f):++b}return c}
})();</script>